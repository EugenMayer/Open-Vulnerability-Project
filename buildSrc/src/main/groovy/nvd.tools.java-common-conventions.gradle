/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    // Apply the java Plugin to add support for Java.
    id 'java'
    id 'maven-publish'
    id 'com.diffplug.spotless'
    id 'com.github.spotbugs'
}

repositories {
    mavenCentral()
    gradlePluginPortal()
}

dependencies {
    constraints {
        // Define dependency versions as constraints
        implementation 'org.apache.commons:commons-text:1.9'
    }
    compileOnly 'com.github.spotbugs:spotbugs-annotations:4.7.3'

    // Use JUnit Jupiter for testing.
    testImplementation 'org.junit.jupiter:junit-jupiter:5.7.2'
}

tasks.named('test') {
    // Use JUnit Platform for unit tests.
    useJUnitPlatform()
}

spotless {
    java {
        targetExclude(fileTree("$buildDir/generated") { include("**/*.java") })
        eclipse().configFile("$rootDir/buildSrc/src/main/config/spotless.eclipseformat.xml")
        licenseHeaderFile("$rootDir/buildSrc/src/main/config/java.license").updateYearWithLatest(true)
    }
}
spotlessJava.dependsOn 'compileJava'
spotlessJava.dependsOn 'compileTestJava'
spotbugsMain.dependsOn 'compileTestJava'
build.finalizedBy 'spotlessApply'

spotbugs {
    excludeFilter.set(file("$rootDir/buildSrc/src/main/config/spotbugs.exclude.xml"))
    reportsDir = file("$buildDir/spotbugs")
}

group 'io.github.jeremylong'
publishing {
    publications {
        "$project.name"(MavenPublication) {
            groupId project.group
            artifactId project.name
            version project.version
            from components.java
        }
    }
}